<!DOCTYPE html>
<html>
<head>
    <meta charset="utfâ€8">
    <title> Hello web audio </title> </head>
<body>
<button onclick="playSound()">Play music!</button><br/>
<button onclick="stopSound()">Stop music!</button>

</body>
<script src="https://unpkg.com/tone"></script>
<script src="./generated/song.js"></script>
<script>
    function playSound() {
        Tone.Transport.start();
        var pulseOptions = {
            oscillator:{
                type: "pulse"
            },
            envelope:{
                release: 0.07
            }
        };
        synth    = new Tone.Synth(pulseOptions).toMaster();
        pulsePart = new Tone.Part(function(time, value){
            console.log(note);
            //the value is an object which contains both the note and the velocity
            synth.triggerAttackRelease(value.note, "8n", time, value.velocity);
        }, [{"time" : 0, "note" : "C3", "velocity": 0.9},
            {"time" : "0:2", "note" : "C4", "velocity": 0.5}
        ]).start(0);
        pulsePart.removeAll();
        pulsePart.start(0);

    }
    function stopSound() {
        Tone.Transport.stop();
        pulsePart.stop(0);
    }
</script>
</html>